{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "build-verify",
			"type": "shell",
			"command": "npm",
			"args": [
				"run",
				"build:verify"
			],
			"problemMatcher": [
				"$tsc",
				"$eslint-stylish"
			],
			"group": "build"
		},
		{
			"label": "contracts-only",
			"type": "shell",
			"command": "npm",
			"args": [
				"run",
				"test:contracts"
			],
			"problemMatcher": [
				"$tsc"
			],
			"group": "build"
		},
		{
			"label": "npm-build",
			"type": "shell",
			"command": "npm",
			"args": [
				"run",
				"build"
			]
		},
		{
			"label": "npm-ci",
			"type": "shell",
			"command": "npm",
			"args": [
				"ci"
			]
		},
		{
			"label": "npm-install",
			"type": "shell",
			"command": "npm",
			"args": [
				"install"
			]
		},
		{
			"label": "npm-test",
			"type": "shell",
			"command": "npm",
			"args": [
				"run",
				"test"
			]
		},
		{
			"label": "retag-v1.0.2",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"git tag -d v0.9.1 2>$null; git push origin :refs/tags/v0.9.1 2>$null; git tag v1.0.2 -f; git push --tags --force-with-lease"
			]
		},
		{
			"label": "git-status",
			"type": "shell",
			"command": "git",
			"args": [
				"status",
				"--short"
			]
		},
		{
			"label": "cleanup-artifacts",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Remove-Item -Force -ErrorAction SilentlyContinue .build.lock; Get-ChildItem tmp -Directory -Filter 'minimal-author-*' -ErrorAction SilentlyContinue | Remove-Item -Recurse -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'concurrent-*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'fuzz_*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Write-Host 'CLEANUP_DONE'"
			]
		},
		{
			"label": "cleanup-pre-release",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Remove-Item -Force -ErrorAction SilentlyContinue .build.lock; Get-ChildItem tmp -Directory -Filter 'minimal-author-*' -ErrorAction SilentlyContinue | Remove-Item -Recurse -Force -ErrorAction SilentlyContinue; Write-Host 'CLEANUP_STAGE_OK'"
			]
		},
		{
			"label": "force-build-verify",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-Command",
				"$env:MCP_FORCE_REBUILD='1'; npm run build:verify"
			]
		},
		{
			"label": "rebuild-after-init-diag",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-Command",
				"$env:MCP_FORCE_REBUILD='1'; npm run build:verify; npm run test:diag"
			]
		},
		{
			"label": "diag-handshake-tests",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-Command",
				"$env:MCP_FORCE_REBUILD='1'; npm run build:verify; $env:MCP_HEALTH_MIXED_DIAG='1'; npx vitest run src/tests/handshakeFlakeRepro.spec.ts src/tests/healthMixedReproLoop.spec.ts --reporter=dot"
			]
		},
		{
			"label": "deploy-local-prod",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoLogo",
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"scripts/deploy-local.ps1",
				"-Rebuild",
				"-Overwrite",
				"-TargetDir",
				"C:\\mcp\\mcp-index-server"
			]
		},
		{
			"label": "deploy-prod",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoLogo",
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"scripts/deploy-local.ps1",
				"-Rebuild",
				"-Overwrite",
				"-BundleDeps",
				"-TargetDir",
				"C:\\mcp\\mcp-index-server-prod"
			]
		},
		{
			"label": "purge-instructions-preview",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"scripts/purge-instructions.ps1"
			]
		},
		{
			"label": "purge-instructions",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy",
				"Bypass",
				"-File",
				"scripts/purge-instructions.ps1",
				"-Force"
			]
		},
		{
			"label": "cleanup-test-artifacts",
			"type": "shell",
			"command": "pwsh",
			"args": [
				"-NoProfile",
				"-Command",
				"Get-ChildItem instructions -Filter '*_17*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'gating_test_entry_*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'defaults_fill_*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'restart_persist_*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Get-ChildItem instructions -Filter 'import_gov_*.json' -ErrorAction SilentlyContinue | Remove-Item -Force -ErrorAction SilentlyContinue; Write-Host 'TEST_ARTIFACTS_CLEANED'"
			]
		},
		{
			"label": "git-commit-changes",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"."
			]
		},
		{
			"label": "git-commit",
			"type": "shell",
			"command": "git",
			"args": [
				"commit",
				"-m",
				"Repository maintenance: cleanup, version bump, enhanced .gitignore\n\n- Enhanced .gitignore with comprehensive test artifact patterns (*_17*.json, gating_test_entry_*, defaults_fill_*, restart_persist_*, import_gov_*)\n- Cleaned up test artifacts and temporary files from instructions/ directory\n- Version bump from 1.0.3 to 1.0.4\n- Added short-circuit mode (MCP_SHORTCIRCUIT=1) for minimal handshake testing\n- Improved handshake ordering and reliability with fallback controls\n- Enhanced rate limiting tests with better concurrency handling\n- Added minimal standalone server for handshake verification\n- Comprehensive test suite validation (154 tests passed)"
			]
		},
		{
			"label": "git-push",
			"type": "shell",
			"command": "git",
			"args": [
				"push"
			]
		},
		{
			"label": "commit-prd-improvements",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"."
			]
		},
		{
			"label": "commit-enterprise-prd",
			"type": "shell",
			"command": "git",
			"args": [
				"commit",
				"-m",
				"docs: PRD enterprise-grade enhancements v1.1.0\n\nâœ¨ Enhanced PROJECT_PRD.md to enterprise excellence:\nâ€¢ Added business value proposition section\nâ€¢ Comprehensive risk management and mitigation strategies\nâ€¢ Improved executive summary with ROI focus\nâ€¢ Enhanced architecture documentation structure\n\nðŸ“š New comprehensive documentation suite:\nâ€¢ MCP-CONFIGURATION.md - Complete setup guide (584 lines)\nâ€¢ PROMPT-OPTIMIZATION.md - Technical prompt handling guide\nâ€¢ Enhanced README.md with complete documentation matrix\nâ€¢ Schema governance requirements in PRD\n\nðŸŽ¯ Key improvements:\nâ€¢ PRD versioned to 1.1.0 with proper governance\nâ€¢ Separated technical prompt guidance from requirements\nâ€¢ Enterprise-grade risk assessment and controls\nâ€¢ Comprehensive security and compliance standards\nâ€¢ Binding quality gates and acceptance criteria\n\nðŸ”§ Documentation architecture optimization:\nâ€¢ Clear separation of concerns (PRD vs technical guides)\nâ€¢ Cross-referenced documentation suite\nâ€¢ Enterprise standards compliance"
			]
		},
		{
			"label": "final-commit",
			"type": "shell",
			"command": "git",
			"args": [
				"commit",
				"-m",
				"docs: PRD enterprise-grade enhancements v1.1.0 with comprehensive documentation suite"
			]
		},
		{
			"label": "push-prd-enhancements",
			"type": "shell",
			"command": "git",
			"args": [
				"push"
			]
		},
		{
			"label": "git-add-content-guidance",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"."
			]
		},
		{
			"label": "git-add-content-guidance",
			"type": "shell",
			"command": "git",
			"args": [
				"add",
				"docs/CONTENT-GUIDANCE.md"
			]
		}
	]
}