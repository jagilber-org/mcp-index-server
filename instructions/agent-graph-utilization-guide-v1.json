{
  "id": "agent-graph-utilization-guide-v1",
  "title": "Agent Graph Utilization Guide (v1)",
  "body": "# Agent Graph Utilization Guide (v1)\n\n## Purpose\nEnable MCP-compatible agents to leverage graph export for instruction retrieval, pattern maintenance, and strategic catalog navigation.\n\n## Core Workflow\n\n### 1. Graph Export and Initial Assessment\n```bash\n# Export instruction relationship graph\nmcp_mcp-index-ser_graph_export -format=json -enrich=true -includeUsage=true\n```\n\n**Usage Pattern**: Begin sessions requiring instruction discovery, catalog analysis, or strategic instruction selection with graph export to understand current topology.\n\n### 2. Retrieval Strategy Patterns\n\n#### A. Category-Based Navigation\n- Use `belongs` edges to find instructions within specific categories\n- Navigate from category nodes to instruction collections\n- Apply for domain-focused work (azure, troubleshooting, governance)\n\n#### B. Usage-Weighted Selection\n- Prioritize high `usageCount` instructions for established patterns\n- Consider `lastUsed` timestamps for relevance assessment\n- Apply when balancing proven vs emerging instruction adoption\n\n#### C. Primary Relationship Traversal\n- Follow `primary` edges for core conceptual connections\n- Use for building coherent instruction sequences\n- Apply when assembling comprehensive guidance workflows\n\n### 3. Scoring Heuristics\n\n#### Relevance Score Calculation\n```javascript\nfunction calculateRelevanceScore(instruction) {\n    const weights = {\n        priority: 0.3,\n        usageCount: 0.25,\n        recency: 0.2,\n        categoryMatch: 0.15,\n        riskScore: -0.1  // Higher risk reduces relevance\n    };\n    \n    const recencyBonus = (Date.now() - new Date(instruction.lastUsed)) < 30days ? 1.0 : 0.5;\n    \n    return (instruction.priority * weights.priority) +\n           (Math.log(instruction.usageCount + 1) * weights.usageCount) +\n           (recencyBonus * weights.recency) +\n           (categoryMatchCount * weights.categoryMatch) +\n           (instruction.riskScore * weights.riskScore);\n}\n```\n\n#### Application Context Weighting\n- **Troubleshooting Context**: Weight `priority` and `usageCount` heavily\n- **Exploration Context**: Weight `categories` and graph connectivity\n- **Governance Context**: Weight `status`, `owner`, and `nextReviewDue`\n\n### 4. Graph Pattern Recognition\n\n#### Hub Instructions (High Out-Degree)\n- Instructions with many outbound `primary` edges\n- Often foundational or overview instructions\n- Use as starting points for unfamiliar domains\n\n#### Bridge Instructions (High Betweenness)\n- Instructions connecting different instruction clusters\n- Critical for cross-domain workflows\n- Prioritize when bridging technical areas\n\n#### Leaf Instructions (Zero Out-Degree)\n- Specific, actionable terminal instructions\n- High implementation value\n- Target for immediate tactical application\n\n### 5. Category Clustering Analysis\n\n#### Category Co-occurrence Patterns\n```bash\n# Find frequently co-occurring categories\ncat graph.json | jq '.nodes[] | select(.type==\"instruction\") | .categories[]' | sort | uniq -c | sort -nr\n```\n\n#### Category Bridge Analysis\n- Instructions spanning multiple categories serve as conceptual bridges\n- Higher category count often indicates broader applicability\n- Use for identifying versatile instruction candidates\n\n### 6. Temporal Usage Patterns\n\n#### Trending Instructions\n- Recent `lastUsed` with increasing `usageCount`\n- Indicates growing adoption and relevance\n- Consider for proactive recommendation\n\n#### Dormant Instructions\n- High historical `usageCount` but stale `lastUsed`\n- May indicate outdated but historically valuable content\n- Candidate for review or retirement\n\n### 7. Strategic Navigation Patterns\n\n#### Breadth-First Discovery\n1. Start with high-priority category nodes\n2. Traverse `belongs` edges to find instruction collections\n3. Apply relevance scoring to select top candidates\n4. Use `primary` edges for related instruction expansion\n\n#### Depth-First Specialization\n1. Identify specific high-relevance instruction\n2. Follow all outbound `primary` edges\n3. Build comprehensive instruction dependency chain\n4. Execute in dependency order\n\n#### Usage-Driven Exploration\n1. Query `hotset` for most-used instructions\n2. Use graph to find related unused instructions\n3. Expand adoption of proven instruction neighborhoods\n\n### 8. Graph Maintenance Workflows\n\n#### Orphan Detection\n```bash\n# Find instructions with no inbound relationships\ncat graph.json | jq '.nodes[] | select(.type==\"instruction\" and (.inDegree // 0) == 0)'\n```\n\n#### Relationship Gap Analysis\n- Instructions in same categories without `primary` connections\n- High-usage instructions not connected to related concepts\n- Bridge opportunities for improved navigation\n\n### 9. Integration with Tool Operations\n\n#### Pre-Operation Graph Assessment\n- Export graph before major instruction operations\n- Use topology understanding to inform addition/modification decisions\n- Prevent creation of isolated instruction islands\n\n#### Post-Operation Validation\n- Re-export graph after instruction modifications\n- Verify expected relationship creation/modification\n- Detect unintended topology changes\n\n### 10. Quality Metrics from Graph\n\n#### Catalog Health Indicators\n```javascript\nfunction assessCatalogHealth(graph) {\n    return {\n        connectivity: averageNodeDegree(graph),\n        categoryBalance: categoryDistributionEntropy(graph),\n        usageDistribution: giniCoefficient(graph.nodes.map(n => n.usageCount)),\n        temporalCoverage: recentUsagePercentage(graph),\n        orphanRatio: orphanNodeCount(graph) / totalInstructionCount(graph)\n    };\n}\n```\n\n#### Target Thresholds\n- Connectivity: Average degree > 2.0\n- Category Balance: Entropy > 0.7\n- Usage Distribution: Gini < 0.8 (avoid extreme concentration)\n- Temporal Coverage: >30% used in last 30 days\n- Orphan Ratio: <10% instructions without relationships\n\n### 11. Advanced Query Patterns\n\n#### Multi-Hop Relationship Queries\n```bash\n# Find instructions 2 steps away from target instruction\ncat graph.json | jq --arg target \"target-instruction-id\" '\n  .edges[] | select(.source == $target) | .target as $step1 |\n  .edges[] | select(.source == $step1) | .target'\n```\n\n#### Category Intersection Discovery\n```bash\n# Find instructions spanning multiple specific categories\ncat graph.json | jq --argjson cats '[\"azure\", \"troubleshooting\"]' '\n  .nodes[] | select(.type==\"instruction\" and \n    ([.categories[]?] | sort) as $inst_cats |\n    $cats | all(. as $cat | $inst_cats | index($cat))\n  )'\n```\n\n### 12. Performance Optimization\n\n#### Graph Caching Strategy\n- Cache graph export for session duration\n- Invalidate cache on instruction catalog modifications\n- Use enriched format for analysis, minimal for quick navigation\n\n#### Selective Analysis\n- Focus graph analysis on relevant instruction subsets\n- Filter by priority thresholds for performance-critical operations\n- Use category filtering for domain-specific analysis\n\n### 13. Integration Points\n\n#### With Instruction Search\n- Use graph topology to expand search result neighborhoods\n- Weight search results by graph centrality measures\n- Suggest related instructions via graph traversal\n\n#### With Usage Tracking\n- Increment usage counts when following graph recommendations\n- Track graph-based vs search-based instruction discovery effectiveness\n- Use usage patterns to refine relationship creation\n\n#### With Instruction Addition\n- Analyze graph before adding new instructions\n- Identify optimal relationship targets for new instructions\n- Ensure new instructions connect to existing topology\n\n### 14. Success Metrics\n\n#### Agent Effectiveness Indicators\n- **Discovery Efficiency**: Time from need identification to relevant instruction location\n- **Coverage Completeness**: Percentage of relevant instructions found for given tasks\n- **Relationship Utilization**: Usage of graph relationships vs direct search\n- **Pattern Recognition**: Successful identification of instruction workflows via graph analysis\n\n#### Catalog Quality Indicators\n- **Relationship Accuracy**: User validation of recommended instruction sequences\n- **Graph Connectivity**: Reduction in orphaned instructions over time\n- **Usage Distribution**: More balanced usage across instruction categories\n- **Maintenance Efficiency**: Faster identification of outdated or missing relationships\n\n## Implementation Guidelines\n\n1. **Session Initialization**: Always begin complex instruction work with graph export\n2. **Strategy Selection**: Choose navigation strategy based on task type (discovery vs application)\n3. **Scoring Application**: Apply relevance scoring consistently across instruction selection\n4. **Pattern Recognition**: Use graph patterns to identify instruction workflows\n5. **Quality Assessment**: Regularly evaluate catalog health using graph metrics\n6. **Integration**: Combine graph analysis with other catalog tools for comprehensive instruction management\n\n## Version History\n- v1.0: Initial agent graph utilization patterns and scoring heuristics",
  "rationale": "Enables systematic and intelligent utilization of instruction relationships for improved agent effectiveness and catalog maintenance",
  "priority": 75,
  "audience": "all",
  "requirement": "recommended",
  "categories": [
    "agent-workflows",
    "graph-analysis",
    "instruction-management",
    "mcp"
  ],
  "primaryCategory": "agent-workflows",
  "sourceHash": "3716b1265a66efaf3dea70f4560674c181873f6edac982da99a6b21dc2b6df36",
  "schemaVersion": "3",
  "createdAt": "2025-09-12T02:27:38.834Z",
  "updatedAt": "2025-09-12T02:27:38.834Z",
  "riskScore": 45,
  "version": "1.0.0",
  "status": "approved",
  "owner": "unowned",
  "priorityTier": "P4",
  "classification": "internal",
  "lastReviewedAt": "2025-09-12T02:27:38.834Z",
  "nextReviewDue": "2026-01-10T02:27:38.834Z",
  "reviewIntervalDays": 120,
  "changeLog": [
    {
      "version": "1.0.0",
      "changedAt": "2025-09-12T02:27:38.834Z",
      "summary": "initial import"
    }
  ],
  "semanticSummary": "# Agent Graph Utilization Guide (v1)"
}