{
  "id": "local-repo-primary-p0-resource",
  "title": "Multi-Agent Workspace Structure - Local Instructions & MCP Index Server Best Practices",
  "body": "# Multi-Agent Workspace Structure - Local Instructions & MCP Index Server Best Practices\n\n## Primary Principle (P0)\n**Use local repository as primary instruction resource** for workspace-specific knowledge while leveraging MCP Index Server for shared organizational knowledge.\n\n## Recommended Workspace Structure\n\n```\nworkspace-root/\n├── .github/\n│   ├── copilot-instructions.md       # Primary agent instructions (all agents)\n│   └── prompts/                      # Reusable prompt templates\n│       ├── code-review.md\n│       ├── deployment.md\n│       └── troubleshooting.md\n├── .vscode/\n│   ├── settings.json                 # Workspace settings\n│   ├── tasks.json                    # Build/run tasks\n│   └── launch.json                   # Debug configurations\n├── .instructions/\n│   ├── README.md                     # Instructions overview\n│   ├── local/                        # Workspace-specific instructions\n│   │   ├── project-context.md\n│   │   ├── architecture-decisions.md\n│   │   └── dev-workflows.md\n│   └── shared/                       # Candidates for MCP promotion\n│       ├── best-practices.md\n│       └── common-patterns.md\n└── docs/                            # Project documentation\n```\n\n## File Purpose & Agent Integration\n\n### .github/copilot-instructions.md (Primary Agent File)\n**Purpose**: Main instruction file read by GitHub Copilot and referenced by other agents\n**Content Template**:\n```markdown\n# Project Instructions for AI Agents\n\n## Project Context\n- **Type**: [web app/API/automation/etc.]\n- **Tech Stack**: [key technologies]\n- **Environment**: [development setup]\n\n## Code Preferences\n- Follow [specific style guides]\n- Use [preferred frameworks/patterns]\n- Prefer [architectural approaches]\n\n## Project-Specific Guidelines\n- [File organization rules]\n- [Testing strategies]\n- [Deployment processes]\n```\n\n### .instructions/local/ (Workspace-Specific)\n**Purpose**: Context that only applies to this workspace\n**Examples**: Project architecture, local dev setup, team workflows, customer requirements\n\n### .instructions/shared/ (MCP Promotion Candidates)\n**Purpose**: Content valuable to other workspaces\n**Examples**: Best practices, reusable patterns, common procedures, tool configurations\n\n## Instruction Lifecycle\n\n### Local Repository (Primary - P0)\n1. **Create** instructions in `.instructions/local/`\n2. **Reference** in `.github/copilot-instructions.md`\n3. **Test** with AI agents in workspace context\n4. **Iterate** based on agent effectiveness\n\n### MCP Index Server (Secondary)\n1. **Evaluate** local instructions for broader value\n2. **Promote** valuable content to MCP Index Server\n3. **Share** across organization workspaces\n4. **Maintain** centralized knowledge base\n\n## Agent Behavior Guidelines\n\n### First-Time Repository Access\n**When an MCP agent encounters a repository without the recommended structure:**\n\n1. **Assessment Phase** (Do NOT automatically create structure)\n   - Check for existing instruction files in common locations\n   - Identify current organization patterns\n   - Assess repository maturity and team preferences\n\n2. **User Consultation** (Always ask before creating)\n   - Present the recommended structure\n   - Explain benefits of standardization\n   - Offer to help implement if user agrees\n   - Respect existing workflows and team decisions\n\n3. **Gradual Implementation** (If user consents)\n   - Start with `.github/copilot-instructions.md` only\n   - Migrate existing instructions incrementally\n   - Preserve original files until migration is complete\n\n### Dirty Repository Migration Protocol\n\n#### Discovery Phase\n```bash\n# Common instruction locations to check:\n- README.md (instruction sections)\n- docs/ folder\n- .vscode/settings.json (workspace instructions)\n- CONTRIBUTING.md\n- Custom instruction files\n- Comments in package.json, requirements.txt, etc.\n```\n\n#### Migration Assessment\n**Before any migration, agents should:**\n1. **Inventory existing instructions** across all locations\n2. **Categorize content** as local vs. potentially shared\n3. **Identify conflicts** with recommended structure\n4. **Propose migration plan** to user for approval\n\n#### Safe Migration Process\n```bash\n# Phase 1: Backup existing content\nmkdir -p .migration-backup/$(date +%Y%m%d)\ncp -r docs/ README.md .vscode/ .migration-backup/$(date +%Y%m%d)/ 2>/dev/null || true\n\n# Phase 2: Create new structure (only if user approves)\nmkdir -p .github/prompts .instructions/{local,shared}\n\n# Phase 3: Migrate content with user review\n# (Each step requires user confirmation)\n```\n\n#### Content Classification for Migration\n\n**Local Instructions** (move to `.instructions/local/`):\n- Project-specific setup procedures\n- Custom build/deployment steps\n- Team-specific workflows\n- Customer/client requirements\n- Environment-specific configurations\n\n**Shared Instructions** (move to `.instructions/shared/`, consider MCP promotion):\n- General best practices\n- Reusable code patterns\n- Common troubleshooting procedures\n- Tool configuration templates\n- Cross-project workflows\n\n**Primary Agent Instructions** (consolidate into `.github/copilot-instructions.md`):\n- Project context and technology stack\n- Coding standards and preferences\n- Architecture principles\n- Testing strategies\n\n### MCP Index Server Promotion Workflow\n\n#### Automatic Promotion Candidates\n**Agents should identify but NOT automatically promote:**\n- Content referenced across multiple repositories\n- Best practices with broad applicability\n- Tool configurations used by multiple teams\n- Common troubleshooting procedures\n- Standardized workflows\n\n#### Promotion Assessment Criteria\n```markdown\n## MCP Promotion Checklist\n- [ ] Content applies to multiple projects/teams\n- [ ] Information is mature and stable\n- [ ] No sensitive/proprietary information\n- [ ] Well-documented and self-contained\n- [ ] User/team approves sharing\n- [ ] Aligns with organizational standards\n```\n\n#### Promotion Process\n1. **User Consultation**: \"I found content that might benefit other teams. Would you like me to promote [specific content] to the MCP Index Server?\"\n2. **Content Review**: Present the content and explain the benefits\n3. **User Approval**: Wait for explicit user consent\n4. **Promotion Execution**: Use MCP Index Server tools to add instruction\n5. **Local Cleanup**: Update local references to point to MCP server\n\n## Implementation Workflow\n\n### Quick Setup (User-Initiated)\n```bash\nmkdir -p .github/prompts .instructions/{local,shared} docs\ntouch .github/copilot-instructions.md .instructions/README.md\n```\n\n### Migration Workflow (Agent-Assisted)\n```bash\n# 1. Assessment (agent performs, reports to user)\nfind . -name \"*.md\" -o -name \"README*\" -o -name \"CONTRIBUTING*\" | head -10\n\n# 2. Backup (agent suggests, user approves)\nmkdir -p .migration-backup/$(date +%Y%m%d)\n\n# 3. Structure creation (user approves)\nmkdir -p .github/prompts .instructions/{local,shared}\n\n# 4. Content migration (user reviews each step)\n# Agents guide but don't execute without approval\n```\n\n### Periodic Review (Monthly)\n- Assess local instruction effectiveness with agents\n- Identify promotion candidates for MCP Index Server\n- Update workspace structure based on agent interactions\n- Review and clean up outdated instructions\n\n## Agent Configuration Notes\n\n### Global MCP (VS Code)\n- Configure MCP servers in global `mcp.json`\n- All workspaces inherit MCP server access\n- Local instructions accessed via direct file references\n\n### Multi-Agent Support\n- **GitHub Copilot**: Automatically reads `.github/copilot-instructions.md`\n- **Claude/OpenAI**: Reference local files in conversation context\n- **VS Code Agent Mode**: Uses global MCP configuration + local files\n\n## Content Guidelines for Agents\n\n### Effective Instructions\n- **Be specific**: Use clear, actionable language\n- **Provide examples**: Include code samples and use cases  \n- **Structure clearly**: Use markdown headers and lists\n- **Reference tools explicitly**: Name specific frameworks and tools\n\n### File Organization\n- **Single purpose** per file\n- **Descriptive names** for easy reference\n- **Logical grouping** in directories\n- **Clear documentation** in README files\n\n## Success Indicators\n- Agents provide accurate project-specific responses\n- Reduced manual context provision\n- Consistent code patterns across workspace\n- Effective knowledge sharing via MCP promotion\n- User satisfaction with instruction organization\n- Smooth onboarding for new team members\n\n## Important Agent Constraints\n\n### What Agents MUST NOT Do\n- **Never automatically create folders/files** without user permission\n- **Never delete or move existing files** without explicit approval\n- **Never promote content to MCP Index Server** without user consent\n- **Never override team-established workflows** without discussion\n\n### What Agents SHOULD Do\n- **Assess and report** on current instruction organization\n- **Suggest improvements** based on best practices\n- **Offer to help implement** recommended structure\n- **Respect user decisions** about their workflow preferences\n- **Provide migration assistance** when requested\n\n## Migration from Current State\n1. **Assess** current instruction organization\n2. **Consult** with user about recommended structure\n3. **Create** folder structure (with user approval)\n4. **Migrate** existing instructions (user-guided)\n5. **Test** agent effectiveness with new structure\n6. **Identify** and propose MCP promotion candidates\n7. **Promote** valuable content (with user approval)\n\nThis structure optimizes AI agent effectiveness by providing clear local context while enabling organizational knowledge sharing through the MCP Index Server, with full respect for user autonomy and existing workflows.",
  "priority": 1,
  "audience": "all",
  "requirement": "mandatory",
  "categories": [
    "best-practices",
    "governance",
    "instruction-management",
    "multi-agent",
    "workflow",
    "workspace-structure"
  ],
  "sourceHash": "74817302f7c7aba33a96c7829a9c7a72be2b77bfa7f54cd7d4b2c289f207e7f5",
  "schemaVersion": "3",
  "createdAt": "2025-08-30T21:22:52.489Z",
  "updatedAt": "2025-09-10T10:56:56.824Z",
  "riskScore": 149,
  "owner": "workspace-governance",
  "version": "1.0.0",
  "status": "approved",
  "priorityTier": "P1",
  "classification": "internal",
  "lastReviewedAt": "2025-08-30T21:22:52.490Z",
  "nextReviewDue": "2025-09-29T21:22:52.490Z",
  "reviewIntervalDays": 30,
  "changeLog": [
    {
      "version": "1.0.0",
      "changedAt": "2025-08-30T21:22:52.489Z",
      "summary": "initial import"
    }
  ],
  "semanticSummary": "use local repo as primary (p0) resource storing local repo only instructions and update local instructions with this information.",
  "primaryCategory": "best-practices"
}