{
  "id": "mcp-registry-server-lookup-publishing",
  "title": "MCP Registry: Server Discovery, Publishing, and Integration Patterns",
  "body": "## Overview\n\nThe MCP Registry (https://registry.modelcontextprotocol.io) is the official community-driven registry for discovering and publishing Model Context Protocol (MCP) servers. It serves as the central hub for MCP server distribution, discovery, and metadata management.\n\n## Architecture & Technology Stack\n\n### Core Infrastructure\n- **Language**: Go-based application\n- **Database**: PostgreSQL backend for persistence\n- **Authentication**: GitHub OAuth, OIDC, DNS verification\n- **API**: RESTful endpoints with OpenAPI specification\n- **Deployment**: Production ready, preview go-live September 4th, 2025\n\n### Project Structure\n```\ncmd/           # CLI tools (publisher, server)\ninternal/      # Core application logic\npkg/           # Public API types and models\ndocs/          # Documentation and examples\ntools/         # Validation and utility scripts\n```\n\n## Server Discovery\n\n### Registry API Endpoints\n- **Base URL**: `https://registry.modelcontextprotocol.io`\n- **Search**: `/v0/search` - Query servers by name, description, tags\n- **List**: `/v0/servers` - Browse all available servers\n- **Details**: `/v0/servers/{id}` - Get specific server metadata\n- **Health**: `/v0/health` - Registry status check\n\n### Search and Discovery Features\n- Full-text search across server names and descriptions\n- Filter by package type (npm, pypi, oci, nuget, mcpb)\n- Version-aware queries with semantic versioning support\n- Repository source filtering (github, gitlab, etc.)\n- Status filtering (active, deprecated, experimental)\n\n## Server Publishing Process\n\n### Prerequisites\n1. **server.json file** - Metadata manifest following official schema\n2. **Authentication** - GitHub OAuth, DNS verification, or OIDC\n3. **Namespace ownership** - Permission to publish under chosen namespace\n4. **mcp-publisher CLI tool** - Official publishing client\n\n### Publishing Workflow\n\n#### 1. Install Publisher Tool\n```bash\nnpm install -g mcp-publisher\n# or download from releases\n```\n\n#### 2. Initialize server.json\n```bash\nmcp-publisher init\n```\nAuto-detects from:\n- Git remote origin (repository URL, server name)\n- package.json (npm packages)\n- pyproject.toml (Python packages)\n- Current directory (fallback naming)\n\n#### 3. Authentication\n```bash\n# GitHub OAuth (most common)\nmcp-publisher login github\n\n# DNS verification for custom domains\nmcp-publisher login dns --domain example.com --private-key YOUR_KEY\n```\n\n#### 4. Publish Server\n```bash\nmcp-publisher publish\n```\n\n### server.json Format\n\n#### Core Structure\n```json\n{\n  \"$schema\": \"https://static.modelcontextprotocol.io/schemas/2025-07-09/server.schema.json\",\n  \"name\": \"io.github.owner/server-name\",\n  \"description\": \"Brief description of server functionality\",\n  \"status\": \"active\",\n  \"repository\": {\n    \"url\": \"https://github.com/owner/repo\",\n    \"source\": \"github\",\n    \"id\": \"owner/repo\"\n  },\n  \"version_detail\": {\n    \"version\": \"1.0.0\"\n  },\n  \"packages\": [...],\n  \"remotes\": [...],\n  \"_meta\": {...}\n}\n```\n\n#### Supported Package Types\n- **NPM**: JavaScript/TypeScript packages\n- **PyPI**: Python packages\n- **OCI/Docker**: Container images\n- **NuGet**: .NET packages\n- **MCPB**: MCP Bundle format\n- **URL**: Direct download links\n\n#### Package Configuration Examples\n\n**NPM Package:**\n```json\n{\n  \"registry_type\": \"npm\",\n  \"registry_base_url\": \"https://registry.npmjs.org\",\n  \"identifier\": \"@modelcontextprotocol/server-example\",\n  \"version\": \"1.0.0\",\n  \"runtime_hint\": \"npx\",\n  \"environment_variables\": [\n    {\n      \"name\": \"API_KEY\",\n      \"description\": \"Required API key\",\n      \"is_required\": true,\n      \"is_secret\": true\n    }\n  ]\n}\n```\n\n**Python Package:**\n```json\n{\n  \"registry_type\": \"pypi\",\n  \"registry_base_url\": \"https://pypi.org\",\n  \"identifier\": \"example-mcp-server\",\n  \"version\": \"1.0.0\",\n  \"runtime_hint\": \"uvx\",\n  \"package_arguments\": [\n    {\n      \"type\": \"positional\",\n      \"value\": \"--config\",\n      \"description\": \"Configuration file path\"\n    }\n  ]\n}\n```\n\n**Docker Container:**\n```json\n{\n  \"registry_type\": \"oci\",\n  \"registry_base_url\": \"https://docker.io\",\n  \"identifier\": \"organization/mcp-server\",\n  \"version\": \"1.0.0\",\n  \"runtime_arguments\": [\n    {\n      \"type\": \"named\",\n      \"name\": \"--network\",\n      \"value\": \"host\",\n      \"description\": \"Use host network mode\"\n    }\n  ]\n}\n```\n\n### Remote Server Support\n```json\n\"remotes\": [\n  {\n    \"transport_type\": \"sse\",\n    \"url\": \"https://api.example.com/mcp/sse\",\n    \"headers\": [\n      {\n        \"name\": \"Authorization\",\n        \"description\": \"API bearer token\",\n        \"is_required\": true,\n        \"is_secret\": true\n      }\n    ]\n  }\n]\n```\n\n## Namespace Management\n\n### Official Namespaces\n- `io.modelcontextprotocol.*` - Official MCP servers\n- `io.github.owner/*` - GitHub repository-based\n- `io.gitlab.owner/*` - GitLab repository-based\n- `organization.domain.com/*` - DNS-verified custom domains\n\n### Permission System\n- **GitHub OAuth**: Automatic permission for `io.github.{username}/*`\n- **DNS Verification**: Custom domain ownership via TXT records\n- **OIDC Integration**: Enterprise identity provider support\n- **Pattern Matching**: Granular permission control with wildcards\n\n## Registry API Authentication\n\n### JWT Token Structure\n```json\n{\n  \"auth_method\": \"github\",\n  \"auth_method_subject\": \"username\",\n  \"permissions\": [\n    {\n      \"action\": \"publish\",\n      \"resource_pattern\": \"io.github.username/*\"\n    }\n  ]\n}\n```\n\n### API Request Format\n```bash\ncurl -X POST https://registry.modelcontextprotocol.io/v0/publish \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer $JWT_TOKEN\" \\\n  -d @server.json\n```\n\n## Versioning and Updates\n\n### Version Management\n- **Semantic Versioning**: Recommended for proper ordering\n- **Unique Versions**: Each version must be unique per server\n- **Immutable Metadata**: Published versions cannot be modified\n- **Latest Tracking**: Registry determines latest version automatically\n\n### Version Comparison Logic\n1. Parse as semantic version if possible\n2. Compare using semver rules (major.minor.patch)\n3. Fall back to timestamp-based ordering for non-semver\n4. Support prerelease labels (alpha, beta, rc)\n\n### Update Process\n- Publish new version with unique version string\n- Registry automatically updates \"latest\" flag\n- Previous versions remain accessible\n- No deletion/unpublishing (under discussion)\n\n## Integration Patterns\n\n### MCP Client Integration\n```javascript\n// Fetch server metadata from registry\nconst response = await fetch(\n  'https://registry.modelcontextprotocol.io/v0/servers/io.modelcontextprotocol/filesystem'\n);\nconst serverConfig = await response.json();\n\n// Use package information to install/run server\nconst { packages } = serverConfig;\nfor (const pkg of packages) {\n  if (pkg.registry_type === 'npm') {\n    // Install and run npm package\n    exec(`npx ${pkg.identifier}@${pkg.version}`);\n  }\n}\n```\n\n### Programmatic Search\n```bash\n# Search for filesystem-related servers\ncurl \"https://registry.modelcontextprotocol.io/v0/search?q=filesystem&registry_type=npm\"\n\n# List all Python MCP servers\ncurl \"https://registry.modelcontextprotocol.io/v0/servers?registry_type=pypi&limit=50\"\n```\n\n### CI/CD Integration\n```yaml\n# GitHub Actions example\n- name: Publish MCP Server\n  run: |\n    mcp-publisher login github --token ${{ secrets.GITHUB_TOKEN }}\n    mcp-publisher publish\n  env:\n    MCP_REGISTRY_URL: https://registry.modelcontextprotocol.io\n```\n\n## Validation and Quality Control\n\n### Schema Validation\n- JSON Schema validation for server.json format\n- Registry-specific constraints beyond base schema\n- Automatic validation during publish process\n- CLI validation tools in repository\n\n### Repository Verification\n- Repository URL accessibility validation\n- Source ID matching (GitHub repo ID verification)\n- Public accessibility requirements (recommended)\n- Security scanning integration (future)\n\n### Package Verification\n- Registry accessibility validation (npm, PyPI, etc.)\n- Version existence verification\n- Package metadata consistency checks\n- Dependency security analysis (planned)\n\n## Security and Trust\n\n### Authentication Security\n- JWT tokens with configurable expiration\n- Permission-based access control\n- Audit logging for publish operations\n- Rate limiting and abuse protection\n\n### Content Security\n- Repository source verification\n- Package registry validation\n- Namespace ownership verification\n- Community reporting mechanisms (planned)\n\n### Privacy Considerations\n- Public registry with open metadata\n- Repository URLs should be publicly accessible\n- Secret environment variables not stored\n- API keys and tokens separate from registry\n\n## Development and Testing\n\n### Local Registry Setup\n```bash\n# Clone registry repository\ngit clone https://github.com/modelcontextprotocol/registry\ncd registry\n\n# Start local development server\ngo run cmd/registry/main.go\n\n# Test publishing with local registry\nexport MCP_REGISTRY_URL=http://localhost:8080\nmcp-publisher publish\n```\n\n### Testing Tools\n- `tools/validate-schemas.sh` - Schema validation\n- `tools/validate-examples.sh` - Example validation\n- `scripts/test_publish.sh` - End-to-end publish testing\n- Unit tests for all API endpoints\n\n## Best Practices\n\n### Server Publishers\n1. **Complete Metadata**: Include comprehensive descriptions and examples\n2. **Semantic Versioning**: Use semver for predictable version ordering\n3. **Security**: Mark sensitive environment variables as secrets\n4. **Documentation**: Maintain up-to-date README and usage examples\n5. **Repository Hygiene**: Keep source repositories public and accessible\n\n### Registry Consumers\n1. **Version Pinning**: Use specific versions in production\n2. **Fallback Strategies**: Handle registry unavailability gracefully\n3. **Caching**: Cache server metadata to reduce API calls\n4. **Error Handling**: Implement robust error handling for registry failures\n5. **Security**: Validate downloaded packages and containers\n\n### Registry Operators\n1. **High Availability**: Multi-region deployment with failover\n2. **Performance**: CDN distribution for global accessibility\n3. **Security**: Regular security audits and dependency updates\n4. **Monitoring**: Comprehensive logging and alerting systems\n5. **Backup**: Regular database backups and disaster recovery\n\n## Troubleshooting\n\n### Common Publishing Issues\n- **Authentication Failure**: Check token validity and permissions\n- **Version Conflicts**: Ensure version string is unique\n- **Schema Validation**: Validate server.json format locally\n- **Namespace Permissions**: Verify ownership of target namespace\n- **Repository Access**: Ensure repository URL is publicly accessible\n\n### Registry API Issues\n- **Rate Limiting**: Implement backoff strategies\n- **Network Timeouts**: Use appropriate timeout values\n- **Version Ordering**: Understand semver vs timestamp ordering\n- **Search Limitations**: Be aware of query complexity limits\n\n### Performance Optimization\n- **Batch Queries**: Use pagination for large result sets\n- **Conditional Requests**: Use ETags for efficient caching\n- **Selective Fields**: Request only needed metadata fields\n- **Regional Endpoints**: Use geographically closest endpoints\n\n## Future Developments\n\n### Planned Features\n- Enhanced security scanning integration\n- Community rating and review system\n- Advanced search with ML-based relevance\n- Federated registry support\n- Package vulnerability reporting\n\n### API Evolution\n- GraphQL endpoint for complex queries\n- WebSocket subscriptions for real-time updates\n- Bulk operations for enterprise use cases\n- Enhanced metadata enrichment\n\n## Resources\n\n### Official Documentation\n- Repository: https://github.com/modelcontextprotocol/registry\n- API Docs: https://staging.registry.modelcontextprotocol.io/docs\n- Schema: https://static.modelcontextprotocol.io/schemas/2025-07-09/server.schema.json\n- Examples: docs/server-json/examples.md in repository\n\n### Community\n- GitHub Issues: Bug reports and feature requests\n- Discussions: Community Q&A and best practices\n- Contributing: Open source contributions welcome\n- Announcements: Follow official MCP channels for updates",
  "rationale": "The MCP Registry is the official central hub for MCP server distribution and discovery. Developers need detailed information about publishing processes, server.json format, authentication methods, API usage, and integration patterns to effectively use the registry for server distribution and discovery.",
  "priority": 95,
  "audience": "mcp-developers",
  "requirement": "MUST provide comprehensive MCP Registry information for server discovery, publishing, and integration when users ask about MCP server lookup, registry publishing, or server discovery mechanisms",
  "categories": [
    "api-integration",
    "mcp",
    "publishing",
    "registry",
    "server-discovery"
  ],
  "sourceHash": "8f9dcf606b37687a8fe1a0e17c0e76540920b0e2a7bb2b302a4d925dfbb727f9",
  "schemaVersion": "3",
  "createdAt": "2025-09-03T12:45:45.550Z",
  "updatedAt": "2025-09-03T12:45:45.550Z",
  "riskScore": 5,
  "version": "1.0.0",
  "status": "approved",
  "owner": "unowned",
  "priorityTier": "P4",
  "classification": "internal",
  "lastReviewedAt": "2025-09-03T12:45:45.551Z",
  "nextReviewDue": "2026-01-01T12:45:45.551Z",
  "reviewIntervalDays": 120,
  "changeLog": [
    {
      "version": "1.0.0",
      "changedAt": "2025-09-03T12:45:45.550Z",
      "summary": "initial import"
    }
  ],
  "semanticSummary": "## Overview",
  "primaryCategory": "api-integration"
}