{
  "id": "mermaid-advanced-styling-comprehensive-guide",
  "title": "Mermaid Advanced Styling & Color Control - Comprehensive Implementation Guide",
  "body": "# Mermaid Advanced Styling & Color Control - Comprehensive Implementation Guide\n\n## Overview\nComplete guide to mermaid diagram styling including color management, typography control, and troubleshooting styling issues. Based on practical problem-solving and working examples.\n\n## Color Control Fundamentals\n\n### Theme Variables (Global Styling)\n```mermaid\n%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#ff7f00', 'primaryTextColor': '#000000', 'primaryBorderColor': '#ff7f00', 'lineColor': '#ff7f00', 'secondaryColor': '#ffcc99', 'tertiaryColor': '#fff'}}}%%\ngraph TD\n    A[Start] --> B[Process]\n    B --> C[End]\n```\n\n### Key Theme Variables\n- `primaryColor`: Main box fill color\n- `primaryTextColor`: Text color inside primary boxes\n- `primaryBorderColor`: Border color for primary elements\n- `lineColor`: Connection line colors\n- `secondaryColor`: Secondary element colors\n- `tertiaryColor`: Background and accent colors\n- `background`: Overall diagram background\n- `mainBkg`: Main background color\n- `textColor`: Global text color\n\n## Individual Node Styling\n\n### Basic Node Styling\n```mermaid\ngraph TD\n    A[Frontend] --> B[API Gateway]\n    B --> C[Microservices]\n    B --> D[Database]\n    \n    %% Individual node styling\n    style A fill:#e1f5fe,stroke:#01579b,stroke-width:3px,color:#000\n    style B fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000\n    style C fill:#e8f5e8,stroke:#2e7d32,stroke-width:3px,color:#000\n    style D fill:#fff3e0,stroke:#ef6c00,stroke-width:3px,color:#000\n```\n\n### Style Properties Reference\n- `fill`: Background color (#hex, named colors)\n- `stroke`: Border color\n- `stroke-width`: Border thickness (px)\n- `color`: Text color\n- `stroke-dasharray`: Dashed borders (e.g., \"5 5\")\n\n## CSS Class-Based Styling\n\n### Class Definition Pattern\n```mermaid\ngraph TD\n    A[Primary Service] --> B[Secondary Service]\n    B --> C[Database]\n    A --> D[Cache]\n    \n    %% Define reusable classes\n    classDef primaryBox fill:#e1f5fe,stroke:#01579b,stroke-width:3px,color:#000\n    classDef secondaryBox fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000\n    classDef dataBox fill:#fff3e0,stroke:#ef6c00,stroke-width:3px,color:#000\n    \n    %% Apply classes to nodes\n    class A primaryBox\n    class B,D secondaryBox\n    class C dataBox\n```\n\n### Predefined Style Classes\n```mermaid\ngraph LR\n    classDef success fill:#d4edda,stroke:#155724,stroke-width:2px,color:#155724\n    classDef warning fill:#fff3cd,stroke:#856404,stroke-width:2px,color:#856404\n    classDef danger fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#721c24\n    classDef info fill:#cce7ff,stroke:#004085,stroke-width:2px,color:#004085\n    \n    A[Success State] --> B[Warning State]\n    B --> C[Error State]\n    C --> D[Info State]\n    \n    class A success\n    class B warning\n    class C danger\n    class D info\n```\n\n## Typography and Font Control\n\n### Font Size Control\n```mermaid\ngraph TD\n    A[Large Header] --> B[Medium Text]\n    B --> C[Small Details]\n    \n    %% Font size styling (use font-size with px)\n    style A fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000,font-size:24px,font-weight:bold\n    style B fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000,font-size:18px\n    style C fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000,font-size:14px\n```\n\n### Font Weight and Style\n```mermaid\ngraph LR\n    A[Bold Title] --> B[Normal Text]\n    B --> C[Light Text]\n    \n    %% Font weight variations\n    style A font-weight:bold,font-size:20px,fill:#fff\n    style B font-weight:normal,font-size:16px,fill:#f0f0f0\n    style C font-weight:300,font-size:14px,fill:#e0e0e0\n```\n\n### Typography Best Practices\n- Always include `px` suffix for font-size (e.g., `font-size:18px`)\n- Use `font-weight:bold` for emphasis\n- Combine font properties with color for better readability\n- Test font sizes across different diagram sizes\n\n## High-Contrast Color Palettes\n\n### Professional Color Scheme\n```mermaid\ngraph TD\n    A[Frontend] --> B[API Gateway]\n    B --> C[Auth Service]\n    B --> D[Business Logic]\n    D --> E[Database]\n    \n    %% High-contrast professional colors\n    style A fill:#1e3a8a,stroke:#1e40af,stroke-width:3px,color:#ffffff,font-size:16px,font-weight:bold\n    style B fill:#7c2d12,stroke:#dc2626,stroke-width:3px,color:#ffffff,font-size:16px,font-weight:bold\n    style C fill:#365314,stroke:#16a34a,stroke-width:3px,color:#ffffff,font-size:16px,font-weight:bold\n    style D fill:#92400e,stroke:#f59e0b,stroke-width:3px,color:#000000,font-size:16px,font-weight:bold\n    style E fill:#581c87,stroke:#8b5cf6,stroke-width:3px,color:#ffffff,font-size:16px,font-weight:bold\n```\n\n### Accessibility-Focused Palette\n```mermaid\ngraph LR\n    A[Step 1] --> B[Step 2]\n    B --> C[Step 3]\n    C --> D[Step 4]\n    \n    %% WCAG AA compliant colors\n    style A fill:#ffffff,stroke:#000000,stroke-width:3px,color:#000000,font-size:18px\n    style B fill:#f0f0f0,stroke:#333333,stroke-width:3px,color:#333333,font-size:18px\n    style C fill:#e0e0e0,stroke:#666666,stroke-width:3px,color:#000000,font-size:18px\n    style D fill:#d0d0d0,stroke:#999999,stroke-width:3px,color:#000000,font-size:18px\n```\n\n## Sequence Diagram Styling\n\n### Participant Styling\n```mermaid\nsequenceDiagram\n    participant U as User\n    participant F as Frontend\n    participant A as API\n    participant D as Database\n    \n    U->>F: Login Request\n    F->>A: Authenticate\n    A->>D: Verify Credentials\n    D-->>A: User Data\n    A-->>F: Auth Token\n    F-->>U: Success\n    \n    %% Note: Sequence diagrams use theme variables primarily\n```\n\n### Sequence Diagram Theme Variables\n```mermaid\n%%{init: {'theme':'base', 'themeVariables': { 'actorBorder': '#ff7f00', 'actorBkg': '#ffcc99', 'actorTextColor': '#000000', 'actorLineColor': '#ff7f00', 'signalColor': '#ff7f00', 'signalTextColor': '#000000'}}}%%\nsequenceDiagram\n    participant A as Client\n    participant B as Server\n    \n    A->>B: Request\n    B-->>A: Response\n```\n\n## Flowchart Advanced Styling\n\n### Complex Multi-Layer Styling\n```mermaid\ngraph TD\n    subgraph \"User Interface Layer\"\n        A[Web App] \n        B[Mobile App]\n    end\n    \n    subgraph \"API Layer\"\n        C[REST API]\n        D[GraphQL API]\n    end\n    \n    subgraph \"Service Layer\"\n        E[Auth Service]\n        F[User Service]\n        G[Order Service]\n    end\n    \n    subgraph \"Data Layer\"\n        H[PostgreSQL]\n        I[Redis Cache]\n    end\n    \n    A --> C\n    B --> D\n    C --> E\n    C --> F\n    D --> F\n    D --> G\n    E --> H\n    F --> H\n    G --> H\n    F --> I\n    \n    %% Layer-specific styling\n    classDef uiLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000,font-size:16px\n    classDef apiLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000,font-size:16px\n    classDef serviceLayer fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000,font-size:16px\n    classDef dataLayer fill:#fff3e0,stroke:#ef6c00,stroke-width:2px,color:#000,font-size:16px\n    \n    class A,B uiLayer\n    class C,D apiLayer\n    class E,F,G serviceLayer\n    class H,I dataLayer\n```\n\n## Line and Connection Styling\n\n### Custom Line Styles\n```mermaid\ngraph TD\n    A[Start] --> B[Process 1]\n    A -.-> C[Optional Process]\n    B ==> D[Critical Path]\n    C --> E[End]\n    D --> E\n    \n    %% Line styling through link classes\n    linkStyle 0 stroke:#ff0000,stroke-width:3px\n    linkStyle 1 stroke:#00ff00,stroke-width:2px,stroke-dasharray: 5 5\n    linkStyle 2 stroke:#0000ff,stroke-width:4px\n    linkStyle 3 stroke:#ff00ff,stroke-width:2px\n    linkStyle 4 stroke:#ffff00,stroke-width:2px\n```\n\n### Connection Types and Styling\n- `-->`: Solid arrow (normal flow)\n- `-.->`: Dotted arrow (optional flow)\n- `==>`: Thick arrow (critical path)\n- `linkStyle N`: Style connection by index\n\n## Common Styling Issues and Solutions\n\n### Color Visibility Problems\n```mermaid\n%% ❌ AVOID: Poor contrast\ngraph TD\n    A[Light text on light background] --> B[Dark text on dark background]\n    style A fill:#ffffe0,color:#ffffff  %% White text on light yellow\n    style B fill:#000080,color:#000000  %% Black text on dark blue\n\n%% ✅ GOOD: High contrast\ngraph TD\n    C[Clear Text] --> D[Readable Text]\n    style C fill:#ffffe0,color:#000000,stroke:#000000,stroke-width:2px  %% Black text on light yellow\n    style D fill:#000080,color:#ffffff,stroke:#ffffff,stroke-width:2px  %% White text on dark blue\n```\n\n### Font Size Issues\n```mermaid\n%% ❌ AVOID: Inconsistent sizing\ngraph TD\n    A[Huge Text] --> B[tiny text]\n    style A font-size:32px\n    style B font-size:8px\n\n%% ✅ GOOD: Consistent hierarchy\ngraph TD\n    C[Header] --> D[Body Text]\n    style C font-size:20px,font-weight:bold\n    style D font-size:16px\n```\n\n### Style Precedence Rules\n1. Individual `style` commands override everything\n2. `classDef` and `class` assignments override theme variables\n3. Theme variables provide base styling\n4. Default mermaid styles are lowest priority\n\n## Troubleshooting Styling Problems\n\n### Debugging Style Application\n```javascript\n// Test styling in isolation\nconst testDiagram = `\ngraph TD\n    A[Test Node]\n    style A fill:#ff0000,color:#ffffff,font-size:20px\n`;\n\n// Generate with different output formats\nmcp_mermaid_enhan_generate_mermaid_diagram({\n  mermaid: testDiagram,\n  outputType: \"svg\",  // SVG shows CSS properties\n  theme: \"base\"       // Use base theme for predictable results\n});\n```\n\n### Common Style Errors\n```mermaid\n%% ❌ Wrong syntax patterns\ngraph TD\n    A[Node]\n    %% style A fill:red                    %% Missing quotes around color\n    %% style A fill:#ff0000 color:#ffffff  %% Missing comma separator\n    %% style A font-size:16               %% Missing px unit\n    \n    %% ✅ Correct syntax\n    style A fill:#ff0000,stroke:#000000,stroke-width:2px,color:#ffffff,font-size:16px\n```\n\n### Theme Variable Debugging\n```mermaid\n%%{init: {'theme':'base', 'themeVariables': { 'primaryColor': '#ff0000', 'primaryTextColor': '#ffffff' }}}%%\ngraph TD\n    A[Primary] --> B[Secondary]\n    %% Theme variables only affect elements without explicit styling\n    %% Use base theme to see theme variable effects clearly\n```\n\n## Advanced Styling Patterns\n\n### State-Based Styling\n```mermaid\ngraph TD\n    A[Ready] --> B[Processing]\n    B --> C[Complete]\n    B --> D[Error]\n    C --> A\n    D --> A\n    \n    %% State-based color coding\n    classDef ready fill:#d4edda,stroke:#155724,stroke-width:2px,color:#155724\n    classDef processing fill:#fff3cd,stroke:#856404,stroke-width:2px,color:#856404\n    classDef complete fill:#cce7ff,stroke:#004085,stroke-width:2px,color:#004085\n    classDef error fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#721c24\n    \n    class A ready\n    class B processing\n    class C complete\n    class D error\n```\n\n### Responsive Typography\n```mermaid\ngraph TD\n    A[Main Title] --> B[Section Header]\n    B --> C[Content Block]\n    C --> D[Detail Text]\n    \n    %% Hierarchical font sizing\n    style A font-size:24px,font-weight:bold,fill:#1e3a8a,color:#ffffff\n    style B font-size:20px,font-weight:bold,fill:#3b82f6,color:#ffffff\n    style C font-size:16px,fill:#93c5fd,color:#000000\n    style D font-size:14px,fill:#dbeafe,color:#000000\n```\n\n### Brand-Consistent Styling\n```mermaid\ngraph LR\n    A[Brand Primary] --> B[Brand Secondary]\n    B --> C[Brand Accent]\n    \n    %% Corporate brand colors\n    classDef brandPrimary fill:#0066cc,stroke:#004499,stroke-width:3px,color:#ffffff,font-weight:bold\n    classDef brandSecondary fill:#66b3ff,stroke:#3399ff,stroke-width:2px,color:#000000\n    classDef brandAccent fill:#ffcc00,stroke:#ff9900,stroke-width:2px,color:#000000\n    \n    class A brandPrimary\n    class B brandSecondary\n    class C brandAccent\n```\n\n## Output Format Considerations\n\n### SVG Output (Recommended for Styling)\n- Full CSS property support\n- Scalable without quality loss\n- Best text rendering\n- Maintains styling fidelity\n\n### PNG Output\n- Fixed resolution\n- Good for presentations\n- May have font rendering differences\n- Limited post-generation editing\n\n### Raw Mermaid Output\n- Preserves all styling code\n- Good for version control\n- Can be rendered by other tools\n- Ideal for documentation\n\n## Style Template Library\n\n### Professional Template\n```mermaid\ngraph TD\n    classDef title fill:#1e3a8a,stroke:#1e40af,stroke-width:3px,color:#ffffff,font-size:18px,font-weight:bold\n    classDef process fill:#3b82f6,stroke:#2563eb,stroke-width:2px,color:#ffffff,font-size:16px\n    classDef decision fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#000000,font-size:16px\n    classDef endpoint fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff,font-size:16px\n    \n    A[Project Start] --> B{Requirements Clear?}\n    B -->|Yes| C[Begin Development]\n    B -->|No| D[Gather Requirements]\n    D --> B\n    C --> E[Project Complete]\n    \n    class A title\n    class C,D process\n    class B decision\n    class E endpoint\n```\n\n### Technical Architecture Template\n```mermaid\ngraph TB\n    classDef frontend fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000,font-size:16px\n    classDef backend fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000,font-size:16px\n    classDef database fill:#fff3e0,stroke:#ef6c00,stroke-width:2px,color:#000,font-size:16px\n    classDef external fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000,font-size:16px\n    \n    subgraph \"Frontend Layer\"\n        A[React App]\n        B[Mobile App]\n    end\n    \n    subgraph \"Backend Layer\"\n        C[API Gateway]\n        D[Microservices]\n    end\n    \n    subgraph \"Data Layer\"\n        E[PostgreSQL]\n        F[Redis]\n    end\n    \n    G[External API]\n    \n    A --> C\n    B --> C\n    C --> D\n    D --> E\n    D --> F\n    D --> G\n    \n    class A,B frontend\n    class C,D backend\n    class E,F database\n    class G external\n```\n\nThis comprehensive styling guide provides practical solutions for creating visually appealing, readable, and professional mermaid diagrams with proper color contrast, typography hierarchy, and consistent styling patterns.",
  "rationale": "Complete styling guide based on practical problem-solving covering color management, typography, and troubleshooting styling issues",
  "priority": 75,
  "audience": "all",
  "requirement": "recommended",
  "categories": [
    "best-practices",
    "colors",
    "mermaid",
    "styling",
    "troubleshooting",
    "typography"
  ],
  "primaryCategory": "best-practices",
  "sourceHash": "8828203718a52d4af4a551c3cd31320cad27897c820b5d4e9c6dccd4dc5b6392",
  "schemaVersion": "3",
  "createdAt": "2025-09-14T15:27:27.675Z",
  "updatedAt": "2025-09-14T15:27:27.675Z",
  "riskScore": 45,
  "version": "1.0.0",
  "changeLog": [
    {
      "version": "1.0.0",
      "changedAt": "2025-09-14T15:27:27.675Z",
      "summary": "initial import"
    }
  ],
  "status": "approved",
  "owner": "unowned",
  "priorityTier": "P4",
  "classification": "internal",
  "lastReviewedAt": "2025-09-14T15:27:27.675Z",
  "nextReviewDue": "2026-01-12T15:27:27.675Z",
  "reviewIntervalDays": 120,
  "semanticSummary": "# Mermaid Advanced Styling & Color Control - Comprehensive Implementation Guide"
}