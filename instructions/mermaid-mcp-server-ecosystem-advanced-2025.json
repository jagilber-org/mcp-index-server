{
  "id": "mermaid-mcp-server-ecosystem-advanced-2025",
  "title": "Mermaid MCP Server Ecosystem - Advanced Configuration & Enhanced Servers 2025",
  "body": "# Mermaid MCP Server Ecosystem - Advanced Configuration & Enhanced Servers 2025\n\n## Overview\nComprehensive guide to mermaid diagram generation using MCP servers, covering basic configuration, enhanced server alternatives, and advanced styling capabilities learned through practical implementation.\n\n## Core MCP Server: mcp-mermaid\n\n### Basic Configuration (Global)\n```json\n// Global: %APPDATA%/Code/User/mcp.json\n\"Mermaid Diagrams\": {\n  \"command\": \"npx\",\n  \"args\": [\n    \"mcp-mermaid@latest\"\n  ],\n  \"env\": {\n    \"MERMAID_MAX_INPUT_CHARS\": \"10000\",\n    \"MERMAID_DEFAULT_FORMAT\": \"svg\",\n    \"MERMAID_ENABLE_PNG\": \"1\"\n  }\n}\n```\n\n### Workspace Configuration\n```json\n// Workspace: .vscode/mcp.json\n\"mermaid-diagrams\": {\n  \"command\": \"npx\",\n  \"args\": [\"mcp-mermaid\"],\n  \"env\": {\n    \"MCP_MERMAID_OUTPUT_FORMAT\": \"svg\",\n    \"MCP_MERMAID_BACKGROUND_COLOR\": \"white\",\n    \"MCP_MERMAID_THEME\": \"default\",\n    \"MCP_MERMAID_OUTPUT_DIR\": \"docs/diagrams\"\n  }\n}\n```\n\n### Available Tools\n- `mcp_mermaid_diagr_generate_mermaid_diagram`: Generate diagrams in PNG/SVG/mermaid formats\n- Basic themes: default, base, forest, dark, neutral\n- Output control: PNG, SVG, raw mermaid syntax\n\n## Enhanced MCP Server: @falldownthesystem/mcp-mermaid\n\n### Advanced Configuration\n```json\n\"Mermaid Enhanced\": {\n  \"command\": \"npx\",\n  \"args\": [\n    \"@falldownthesystem/mcp-mermaid@latest\"\n  ],\n  \"env\": {\n    \"MERMAID_MAX_INPUT_CHARS\": \"15000\",\n    \"MERMAID_DEFAULT_FORMAT\": \"svg\",\n    \"MERMAID_ENABLE_PNG\": \"1\"\n  }\n}\n```\n\n### Enhanced Features\n- **Increased Limits**: 15,000 character input (vs 10,000 basic)\n- **File Output**: Direct file saving with path specification\n- **Advanced Styling**: Better color and font control\n- **Improved Error Handling**: Better validation and debugging\n- **Tool**: `mcp_mermaid_enhan_generate_mermaid_diagram`\n\n### Enhanced Parameters\n```javascript\n{\n  \"mermaid\": \"diagram syntax\",\n  \"outputType\": \"png|svg|mermaid\",\n  \"theme\": \"default|base|forest|dark|neutral\",\n  \"backgroundColor\": \"white|transparent|#hex\",\n  \"outputPath\": \"optional/file/path.svg\",\n  \"saveOnly\": true // true=save only, false=save+return content\n}\n```\n\n## Alternative MCP Servers\n\n### Validation Server: @rtuin/mcp-mermaid-validator\n- **Purpose**: Syntax validation and error checking\n- **Use Case**: Pre-validation before diagram generation\n- **Installation**: `npm install -g @rtuin/mcp-mermaid-validator`\n\n### Puppeteer Server: @peng-shawn/mermaid-mcp-server\n- **Purpose**: High-quality rendering using Puppeteer\n- **Features**: Advanced rendering options, custom CSS injection\n- **Use Case**: Production-quality diagram generation\n- **Installation**: `npm install -g @peng-shawn/mermaid-mcp-server`\n\n## Server Comparison Matrix\n\n| Feature | mcp-mermaid | @falldownthesystem | @rtuin/validator | @peng-shawn |\n|---------|-------------|-------------------|------------------|-------------|\n| Input Limit | 10,000 chars | 15,000 chars | Validation only | Variable |\n| File Output | No | Yes | No | Yes |\n| Themes | 5 basic | 5 basic | N/A | Custom CSS |\n| Validation | Basic | Enhanced | Advanced | Integrated |\n| Performance | Fast | Fast | Instant | Slower (Puppeteer) |\n| Quality | Good | Good | N/A | Excellent |\n| Use Case | Basic diagrams | Enhanced workflow | Pre-validation | Production |\n\n## Installation & Setup Workflow\n\n### 1. Check Existing Installation\n```bash\n# Check npm registry\nnpm search mcp-mermaid\n\n# Verify package exists\nnpm info mcp-mermaid\nnpm info @falldownthesystem/mcp-mermaid\n```\n\n### 2. Install Enhanced Server\n```bash\n# Global installation (recommended)\nnpm install -g @falldownthesystem/mcp-mermaid\n\n# Verify installation\nnpx @falldownthesystem/mcp-mermaid --version\n```\n\n### 3. Configure Both Servers\n```json\n// Support both basic and enhanced in same config\n{\n  \"mcpServers\": {\n    \"Mermaid Basic\": {\n      \"command\": \"npx\",\n      \"args\": [\"mcp-mermaid@latest\"]\n    },\n    \"Mermaid Enhanced\": {\n      \"command\": \"npx\",\n      \"args\": [\"@falldownthesystem/mcp-mermaid@latest\"],\n      \"env\": {\n        \"MERMAID_MAX_INPUT_CHARS\": \"15000\"\n      }\n    }\n  }\n}\n```\n\n### 4. Test Configuration\n```javascript\n// Test basic server\nmcp_mermaid_diagr_generate_mermaid_diagram({\n  mermaid: \"graph TD; A-->B\",\n  outputType: \"svg\"\n})\n\n// Test enhanced server\nmcp_mermaid_enhan_generate_mermaid_diagram({\n  mermaid: \"graph TD; A-->B\",\n  outputType: \"svg\",\n  outputPath: \"test-diagram.svg\"\n})\n```\n\n## Common Configuration Issues\n\n### Package Name Confusion\n- ❌ `@modelcontextprotocol/server-mermaid` (doesn't exist)\n- ✅ `mcp-mermaid` (correct basic package)\n- ✅ `@falldownthesystem/mcp-mermaid` (enhanced package)\n\n### Server Not Found\n```bash\n# Troubleshooting steps\n1. Check package installation: npm list -g | grep mermaid\n2. Verify package exists: npm info mcp-mermaid\n3. Test direct execution: npx mcp-mermaid --help\n4. Check MCP server logs in VS Code Developer Console\n```\n\n### Environment Variables\n```bash\n# Common environment issues\nMERMAID_MAX_INPUT_CHARS=\"15000\"  # Use quotes for numeric values\nMERMAID_DEFAULT_FORMAT=\"svg\"     # Case-sensitive format names\nMERMAID_ENABLE_PNG=\"1\"           # String \"1\" not boolean true\n```\n\n## VS Code Toolset Integration\n\n### Mermaid Toolset Configuration\n```json\n// %APPDATA%/Code/User/prompts/tool-minimum-surface.toolsets.jsonc\n{\n  \"mermaidBasic\": {\n    \"tools\": [\n      \"mcp_mermaid_diagr_generate_mermaid_diagram\"\n    ],\n    \"description\": \"Basic mermaid diagram generation\",\n    \"icon\": \"graph\"\n  },\n  \"mermaidEnhanced\": {\n    \"tools\": [\n      \"mcp_mermaid_enhan_generate_mermaid_diagram\"\n    ],\n    \"description\": \"Enhanced mermaid with file output and advanced styling\",\n    \"icon\": \"tools\"\n  }\n}\n```\n\n### Combined Workflow Toolset\n```json\n{\n  \"diagramWorkflow\": {\n    \"tools\": [\n      \"mcp_mermaid_enhan_generate_mermaid_diagram\",\n      \"create_file\",\n      \"read_file\",\n      \"replace_string_in_file\"\n    ],\n    \"description\": \"Complete diagram creation and editing workflow\",\n    \"icon\": \"library\"\n  }\n}\n```\n\n## Advanced Usage Patterns\n\n### Batch Diagram Generation\n```javascript\n// Generate multiple diagrams with consistent styling\nconst diagrams = [\n  { name: \"architecture\", syntax: \"graph TD; A-->B\" },\n  { name: \"sequence\", syntax: \"sequenceDiagram; A->>B: Hello\" }\n];\n\ndiagrams.forEach(diagram => {\n  mcp_mermaid_enhan_generate_mermaid_diagram({\n    mermaid: diagram.syntax,\n    outputType: \"svg\",\n    outputPath: `docs/${diagram.name}.svg`,\n    theme: \"default\",\n    backgroundColor: \"white\"\n  });\n});\n```\n\n### Template-Based Generation\n```javascript\n// Use templates for consistent diagram structure\nconst architectureTemplate = `\ngraph TD\n    classDef primaryBox fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000\n    classDef secondaryBox fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000\n    \n    {{content}}\n`;\n\nconst content = \"A[Frontend] --> B[API]\\nB --> C[Database]\";\nconst diagram = architectureTemplate.replace('{{content}}', content);\n\nmcp_mermaid_enhan_generate_mermaid_diagram({\n  mermaid: diagram,\n  outputType: \"svg\",\n  outputPath: \"architecture-diagram.svg\"\n});\n```\n\n### Integration with Documentation Workflows\n```javascript\n// Auto-generate diagrams from documentation\nfunction generateDocsWithDiagrams(markdownContent) {\n  const diagramBlocks = markdownContent.match(/```mermaid([\\s\\S]*?)```/g);\n  \n  diagramBlocks?.forEach((block, index) => {\n    const mermaidSyntax = block.replace(/```mermaid\\n?|```/g, '').trim();\n    \n    mcp_mermaid_enhan_generate_mermaid_diagram({\n      mermaid: mermaidSyntax,\n      outputType: \"svg\",\n      outputPath: `docs/diagrams/auto-generated-${index}.svg`,\n      saveOnly: true\n    });\n  });\n}\n```\n\n## Performance Optimization\n\n### Server Selection Strategy\n1. **Basic Server**: Simple diagrams, quick prototyping\n2. **Enhanced Server**: Production workflows, file output needed\n3. **Validator Server**: Large projects, syntax validation critical\n4. **Puppeteer Server**: High-quality output, custom styling required\n\n### Resource Management\n- **Character Limits**: Monitor input size (10K basic, 15K enhanced)\n- **Memory Usage**: Large diagrams may require enhanced server\n- **File Management**: Use outputPath for persistent diagrams\n- **Concurrent Generation**: Enhanced server handles parallel requests better\n\n## Troubleshooting Quick Reference\n\n### Server Installation Issues\n```bash\n# 1. Clear npm cache\nnpm cache clean --force\n\n# 2. Reinstall packages\nnpm uninstall -g mcp-mermaid @falldownthesystem/mcp-mermaid\nnpm install -g mcp-mermaid @falldownthesystem/mcp-mermaid\n\n# 3. Verify installation\nnpx mcp-mermaid --help\nnpx @falldownthesystem/mcp-mermaid --help\n```\n\n### MCP Configuration Issues\n```json\n// Common config problems and solutions\n{\n  // ❌ Wrong package name\n  \"args\": [\"@modelcontextprotocol/server-mermaid\"],\n  \n  // ✅ Correct package name\n  \"args\": [\"mcp-mermaid@latest\"],\n  \n  // ❌ Missing environment quotes\n  \"MERMAID_MAX_INPUT_CHARS\": 15000,\n  \n  // ✅ Proper environment format\n  \"MERMAID_MAX_INPUT_CHARS\": \"15000\"\n}\n```\n\n### Tool Availability Issues\n```bash\n# Check MCP tool registration\n1. Open VS Code Developer Console (Help > Toggle Developer Tools)\n2. Look for MCP server connection logs\n3. Use MCP: List Tools command to verify tool availability\n4. Check for duplicate server names in configuration\n```\n\n## Future Considerations\n\n### Emerging Alternatives\n- Monitor npm registry for new mermaid MCP servers\n- Community-developed enhancements and forks\n- Integration with AI diagram generation tools\n\n### Version Management\n- Pin specific versions for production: `mcp-mermaid@1.2.3`\n- Test new versions in development before upgrading\n- Maintain compatibility with existing diagram libraries\n\n### Integration Opportunities\n- GitHub Actions for automated diagram generation\n- CI/CD pipeline integration for documentation\n- Real-time collaborative diagram editing\n\nThis comprehensive guide covers the complete mermaid MCP server ecosystem based on practical implementation experience, providing agents with the knowledge needed to successfully configure, use, and troubleshoot mermaid diagram generation in development workflows.",
  "rationale": "Comprehensive guide to mermaid MCP server ecosystem covering practical configuration, enhanced servers, and troubleshooting based on real implementation experience",
  "priority": 80,
  "audience": "all",
  "requirement": "recommended",
  "categories": [
    "configuration",
    "documentation",
    "mcp",
    "mermaid",
    "visualization"
  ],
  "primaryCategory": "configuration",
  "sourceHash": "1967f4bad2c8f9be81716cf03cffc09e9f0e6ca0f93229408acc5ebe0a88b8cd",
  "schemaVersion": "3",
  "createdAt": "2025-09-14T15:26:10.081Z",
  "updatedAt": "2025-09-14T15:26:10.081Z",
  "riskScore": 40,
  "version": "1.0.0",
  "changeLog": [
    {
      "version": "1.0.0",
      "changedAt": "2025-09-14T15:26:10.081Z",
      "summary": "initial import"
    }
  ],
  "status": "approved",
  "owner": "unowned",
  "priorityTier": "P4",
  "classification": "internal",
  "lastReviewedAt": "2025-09-14T15:26:10.082Z",
  "nextReviewDue": "2026-01-12T15:26:10.082Z",
  "reviewIntervalDays": 120,
  "semanticSummary": "# Mermaid MCP Server Ecosystem - Advanced Configuration & Enhanced Servers 2025"
}
