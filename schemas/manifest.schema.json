{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "CatalogManifest",
  "description": "Lightweight snapshot manifest for instruction catalog drift detection (independent of instruction.schema.json).",
  "type": "object",
  "required": ["version", "generatedAt", "count", "entries"],
  "additionalProperties": false,
  "properties": {
    "version": { "type": "integer", "enum": [1] },
    "generatedAt": { "type": "string", "format": "date-time" },
    "count": { "type": "integer", "minimum": 0 },
    "hash": { "type": "string", "pattern": "^[a-f0-9]{64}$" },
    "summary": { "type": "object", "additionalProperties": true },
    "entries": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "bodyHash"],
        "additionalProperties": false,
        "properties": {
          "id": { "type": "string" },
          "sourceHash": { "type": "string", "pattern": "^[a-f0-9]{64}$" },
          "bodyHash": { "type": "string", "pattern": "^[a-f0-9]{64}$" },
          "title": { "type": "string" },
          "priority": { "type": "number" },
          "priorityTier": { "type": "string" },
          "audience": { "type": "string" },
          "requirement": { "type": "string" }
        }
      }
    }
  }
}
